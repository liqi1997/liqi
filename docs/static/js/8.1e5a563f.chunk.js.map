{"version":3,"sources":["pages/News/index.module.css","api/ask.js","pages/News/index.jsx","api/news.js"],"names":["module","exports","ask","axios","create","baseURL","interceptors","request","use","config","error","Promise","reject","response","data","News","useState","categoryList","setCategoryList","activeId","setActiveId","name","setName","url","setUrl","list","setList","updateTime","setUpdateTime","useEffect","then","res","console","log","Array","isArray","arr","forEach","item","subs","length","id","update_time","className","styles","map","category","active","onClick","container","href","target","rel","index","first","title","tag","time"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,UAAY,wBAAwB,KAAO,mBAAmB,SAAW,uBAAuB,OAAS,qBAAqB,KAAO,mBAAmB,KAAO,mBAAmB,MAAQ,oBAAoB,MAAQ,oBAAoB,IAAM,kBAAkB,KAAO,qB,2ECCrRC,E,OAAMC,EAAMC,OAAO,CACrBC,QAAS,sCAIbH,EAAII,aAAaC,QAAQC,KAAI,SAAUC,GAEnC,OAAOA,KACR,SAAUC,GAET,OAAOC,QAAQC,OAAOF,MAI1BR,EAAII,aAAaO,SAASL,KAAI,SAAUK,GAEpC,OAAOA,EAASC,QACjB,SAAUJ,GAET,OAAOC,QAAQC,OAAOF,MAGXR,Q,6BC0EAa,UA7Ff,WAAiB,IAAD,EAE4BC,mBAAS,IAFrC,mBAELC,EAFK,KAESC,EAFT,OAGoBF,oBAAU,GAH9B,mBAGLG,EAHK,KAGKC,EAHL,OAKYJ,mBAAS,IALrB,mBAKLK,EALK,KAKCC,EALD,OAMUN,mBAAS,IANnB,mBAMLO,EANK,KAMAC,EANA,OAOYR,mBAAS,IAPrB,mBAOLS,EAPK,KAOCC,EAPD,OAQwBV,mBAAS,IARjC,mBAQLW,EARK,KAQOC,EARP,KA+CZ,OAnCAC,qBAAU,WCdH3B,EAAI,CACPqB,IAAK,cDcOO,MAAK,SAAAC,GAEb,GADAC,QAAQC,IAAI,MAAOF,GACfG,MAAMC,QAAQJ,GAAM,CACpB,IAAIK,EAAM,GACVL,EAAIM,SAAQ,SAAAC,GACJJ,MAAMC,QAAQG,EAAKC,QACnBH,EAAG,sBAAOA,GAAP,YAAeE,EAAKC,WAI3BH,EAAII,OAAS,IACbtB,EAAgBkB,GAChBhB,EAAYgB,EAAI,GAAGK,WAMhC,IAEHZ,qBAAU,WC9BP,IAAmBY,ED+BdtB,GAAY,IC/BEsB,EDgCJtB,EC/BXjB,EAAI,CACPqB,IAAI,QAAD,OAAUkB,EAAV,YD8BqBX,MAAK,SAAAC,GACjBG,MAAMC,QAAQJ,EAAIjB,QAClBQ,EAAQS,EAAIV,MACZG,EAAOO,EAAIR,KACXG,EAAQK,EAAIjB,MACZc,EAAcG,EAAIW,mBAK/B,CAACvB,IAEG,sBAAKwB,UAAU,GAAf,UAEH,qBAAKA,UAAU,YAAf,SACI,oBAAIA,UAAWC,IAAOnB,KAAtB,SACKR,EAAa4B,KAAI,SAAAP,GAAI,OAAI,oBAAIK,UAAS,UAAKC,IAAOE,SAAZ,YAAwB3B,IAAamB,EAAKG,GAAKG,IAAOG,OAAS,IAAMC,QAAS,WAAQ5B,EAAYkB,EAAKG,KAApH,SACrBH,EAAKjB,cAMlB,qBAAKsB,UAAWC,IAAOK,UAAvB,SACI,sBAAKN,UAAU,YAAf,UACI,qBAAKA,UAAWC,IAAOvB,KAAvB,SACI,mBAAG6B,KAAM3B,EAAK4B,OAAO,SAASC,IAAI,aAAlC,SACK/B,MAGT,6BACKI,EAAKoB,KAAI,SAACP,EAAMe,GAAP,OAAiB,qBAAIV,UAAWC,IAAON,KAAtB,UAGvB,uBAAMK,UAAS,UAAKC,IAAOS,MAAZ,YAAqBA,EAAQ,EAAIT,IAAOU,MAAQ,IAA/D,UACKD,EAAQ,EADb,OAIA,mBAAGV,UAAWC,IAAOW,MAAOL,KAAMZ,EAAKf,IAAK4B,OAAO,SAASC,IAAI,aAAhE,SACKd,EAAKiB,QAGV,sBAAMZ,UAAWC,IAAOY,IAAxB,SAA8BlB,EAAKkB,cAI3C,sBAAKb,UAAWC,IAAOa,KAAvB,uCAAqC9B","file":"static/js/8.1e5a563f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"News_container__3-7ca\",\"list\":\"News_list__QDZJq\",\"category\":\"News_category__peQjt\",\"active\":\"News_active__1Fmjf\",\"name\":\"News_name__v_eZ-\",\"item\":\"News_item__2egky\",\"index\":\"News_index__2fjvf\",\"first\":\"News_first__1vcFf\",\"tag\":\"News_tag__2ZLsL\",\"time\":\"News_time__2sxeg\"};","import axios from 'axios'\n\nconst ask = axios.create({\n    baseURL: 'http://cone.love:8000/api/rest/v1'\n})\n\n// 添加请求拦截器\nask.interceptors.request.use(function (config) {\n    // 在发送请求之前做些什么\n    return config;\n}, function (error) {\n    // 对请求错误做些什么\n    return Promise.reject(error);\n});\n\n// 添加响应拦截器\nask.interceptors.response.use(function (response) {\n    // 对响应数据做点什么\n    return response.data;\n}, function (error) {\n    // 对响应错误做点什么\n    return Promise.reject(error);\n});\n\nexport default ask;","\nimport { useEffect, useState } from 'react';\nimport { fetchList, fetchNews } from '../../api/news'\nimport styles from './index.module.css'\n\nfunction News() {\n\n    const [categoryList, setCategoryList] = useState([])\n    const [activeId, setActiveId] = useState(-1)\n\n    const [name, setName] = useState('')\n    const [url, setUrl] = useState('')\n    const [list, setList] = useState([])\n    const [updateTime, setUpdateTime] = useState('')\n\n\n\n    useEffect(() => {\n        fetchList().then(res => {\n            console.log('res', res)\n            if (Array.isArray(res)) {\n                let arr = []\n                res.forEach(item => {\n                    if (Array.isArray(item.subs)) {\n                        arr = [...arr, ...item.subs]\n                    }\n                })\n\n                if (arr.length > 0) {\n                    setCategoryList(arr)\n                    setActiveId(arr[0].id)\n                }\n\n\n            }\n        })\n    }, []);\n\n    useEffect(() => {\n        if (activeId > -1) {\n            fetchNews(activeId).then(res => {\n                if (Array.isArray(res.data)) {\n                    setName(res.name)\n                    setUrl(res.url)\n                    setList(res.data)\n                    setUpdateTime(res.update_time)\n                }\n            })\n        }\n\n    }, [activeId]);\n\n    return <div className=''>\n\n        <div className='container'>\n            <ul className={styles.list}>\n                {categoryList.map(item => <li className={`${styles.category} ${activeId === item.id ? styles.active : ''}`} onClick={() => { setActiveId(item.id) }}>\n                    {item.name}\n                </li>)}\n            </ul>\n\n        </div>\n\n        <div className={styles.container}>\n            <div className=\"container\">\n                <div className={styles.name}>\n                    <a href={url} target=\"_blank\" rel='noreferrer'>\n                        {name}\n                    </a>\n                </div>\n                <ul>\n                    {list.map((item, index) => <li className={styles.item}>\n\n\n                        <span className={`${styles.index} ${index < 3 ? styles.first : ''}`}>\n                            {index + 1}.\n                        </span>\n\n                        <a className={styles.title} href={item.url} target=\"_blank\" rel='noreferrer'>\n                            {item.title}\n                        </a>\n\n                        <span className={styles.tag}>{item.tag}</span>\n                    </li>)}\n                </ul>\n\n                <div className={styles.time} >更新时间: {updateTime}</div>\n\n            </div>\n        </div>\n\n\n\n\n\n    </div>\n}\n\nexport default News;","import ask from './ask'\n\nexport function fetchList() {\n    return ask({\n        url: '/sub/cate',\n    })\n}\n\nexport function fetchNews(id) {\n    return ask({\n        url: `/sub/${id}/data`\n    })\n}"],"sourceRoot":""}