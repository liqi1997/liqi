{"version":3,"sources":["pages/Stock/index.module.css","pages/Stock/KChart/index.module.css","pages/Stock/KChart/index.jsx","pages/Stock/index.jsx","components/SvgIcon/index.jsx"],"names":["module","exports","KChart","state","list","page","setChart","dom","document","getElementById","chart","init","setOption","xAxis","data","map","item","opening_date","yAxis","series","type","opening_price","closing_price","min_price","max_price","tooltip","show","setPage","setState","fetchList","this","code","props","fetch","then","res","json","Array","isArray","results","catch","err","console","error","id","style","height","width","className","styles","active","onClick","Component","Stock","useState","companyList","setCompanyList","setActive","useEffect","setList","total","setTotal","stockName","setStockName","str","name","count","detail","setDetail","searchValue","setSearchValue","container","left","h1","extra","extraText","SvgIcon","size","info","header","tag","stock_type","title","description","business_scope","right","search","searchInput","placeholder","value","onChange","e","target","searchButton","card","arr","index","icon","i","push","renderCompany","aria-hidden","href"],"mappings":"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","file":"static/js/5.efd2f825.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Stock_container__LQtZd\",\"left\":\"Stock_left__1qlOT\",\"right\":\"Stock_right__3Zzfp\",\"h1\":\"Stock_h1__1oY5K\",\"extra\":\"Stock_extra__3wWU8\",\"extraText\":\"Stock_extraText__2DUne\",\"card\":\"Stock_card__3ziBO\",\"item\":\"Stock_item__2__hu\",\"active\":\"Stock_active__1nIg3\",\"icon\":\"Stock_icon__23o9C\",\"title\":\"Stock_title__3qtMt\",\"value\":\"Stock_value__2I4iI\",\"info\":\"Stock_info__7YW8H\",\"header\":\"Stock_header__2Q0J5\",\"code\":\"Stock_code__1-hPM\",\"description\":\"Stock_description__2WY80\",\"tag\":\"Stock_tag__24QPh\",\"search\":\"Stock_search__Mghql\",\"searchInput\":\"Stock_searchInput__EwxKU\",\"searchButton\":\"Stock_searchButton__2MDWc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"KChart_item__AY1I6\",\"active\":\"KChart_active__3Z_8o\"};","import { Component } from 'react'\r\nimport { init } from 'echarts'\r\nimport styles from './index.module.css'\r\n\r\nclass KChart extends Component {\r\n\r\n    state = {\r\n        list: [],\r\n        page: 50\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchList();\r\n    }\r\n\r\n    fetchList() {\r\n\r\n        const { code } = this.props;\r\n        const { page } = this.state;\r\n\r\n        fetch(`http://cone387.top:8080/stock/market/?code=${code}&page=1&page_size=${page}`).then(res => res.json()).then(res => {\r\n            if (res && Array.isArray(res.results)) {\r\n\r\n                this.setState({\r\n                    list: res.results\r\n                }, () => {\r\n                    this.setChart();\r\n                })\r\n\r\n            }\r\n        }).catch(err => console.error)\r\n    }\r\n\r\n    setChart = () => {\r\n\r\n        const { list = [] } = this.state;\r\n\r\n        const dom = document.getElementById('k-chart');\r\n\r\n        this.chart = init(dom)\r\n\r\n        this.chart.setOption({\r\n            xAxis: {\r\n                data: list.map(item => item.opening_date)\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                type: 'k',\r\n                data: list.map(item => [\r\n                    item.opening_price,\r\n                    item.closing_price,\r\n                    item.min_price,\r\n                    item.max_price\r\n                ]),\r\n            }],\r\n            tooltip: {\r\n                show: true,\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    setPage = (page) => {\r\n        this.setState({\r\n            page,\r\n        }, () => {\r\n            this.fetchList();\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { page } = this.state;\r\n\r\n        return (\r\n\r\n            <div>\r\n\r\n                <div id='k-chart' style={{ height: 400, width: '100%' }}>\r\n\r\n                </div>\r\n\r\n                <div className='center'>\r\n\r\n                    <div className={`${styles.item} ${page === 50 ? styles.active : ''}`} onClick={() => { this.setPage(50) }}>最近50条</div>\r\n                    <div className={`${styles.item} ${page === 100 ? styles.active : ''}`} onClick={() => { this.setPage(100) }}>最近100条</div>\r\n                    <div className={`${styles.item} ${page === 200 ? styles.active : ''}`} onClick={() => { this.setPage(200) }}>最近200条</div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default KChart","import { useEffect, useState } from \"react\";\r\nimport styles from './index.module.css'\r\nimport SvgIcon from '../../components/SvgIcon'\r\nimport KChart from './KChart'\r\n\r\n\r\nfunction Stock() {\r\n\r\n    const [companyList, setCompanyList] = useState({})\r\n\r\n    const [active, setActive] = useState(null)\r\n\r\n    useEffect(() => {\r\n        fetch(`http://cone387.top:8080/stock/status/`).then(res => res.json()).then(res => {\r\n            if (res) {\r\n                setCompanyList(res)\r\n            }\r\n        }).catch(err => console.error)\r\n    }, []);\r\n\r\n    const [page, setPage] = useState(1)\r\n    const [list, setList] = useState([])\r\n    const [total, setTotal] = useState(0)\r\n\r\n    const [stockName, setStockName] = useState(null)\r\n\r\n    useEffect(() => {\r\n\r\n        let str = ''\r\n        if (active) {\r\n            str = `&stock_type=${active}`\r\n        }\r\n\r\n        let name = '';\r\n        if (stockName) {\r\n            name = `&name=${stockName}`\r\n        }\r\n\r\n        fetch(`http://cone387.top:8080/stock/info/?page=${page}&page_size=10${str}${name}`).then(res => res.json()).then(res => {\r\n            if (typeof res.count === 'number') {\r\n                setTotal(res.count)\r\n            }\r\n            if (Array.isArray(res.results)) {\r\n                setList(res.results)\r\n            }\r\n        })\r\n    }, [page, active, stockName])\r\n\r\n    function prev() {\r\n        if (page === 1) {\r\n            return\r\n        }\r\n        setPage(page - 1)\r\n    }\r\n    function next() {\r\n        setPage(page + 1)\r\n    }\r\n\r\n    function renderCompany() {\r\n        let arr = []\r\n        let index = 0;\r\n        let icon = <SvgIcon name='#icon-2-dianzishenhe' size='24' />\r\n\r\n        for (let i in companyList) {\r\n\r\n            if (index === 1) {\r\n                icon = <SvgIcon name='#icon-12-changguirenwu' size='24' />\r\n            }\r\n            if (index === 2) {\r\n                icon = <SvgIcon name='#icon-14-zhishiku' size='24' />\r\n            }\r\n            if (index === 3) {\r\n                icon = <SvgIcon name='#icon-15-chehuixiaoxi' size='24' />\r\n            }\r\n            if (index === 4) {\r\n                icon = <SvgIcon name='#icon-19-qiehuancaozuo-icon' size='24' />\r\n            }\r\n\r\n            index++;\r\n\r\n            arr.push(\r\n                <div className={`${styles.item} ${active === i ? styles.active : ''}`} onClick={() => { setActive(i); setPage(1) }}>\r\n\r\n                    <div className={styles.icon}>{icon}</div>\r\n                    <div className={styles.title}>{i}</div>\r\n                    <div className={styles.value}>\r\n                        {companyList[i]}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    const [detail, setDetail] = useState(null)\r\n    function seeDetail(code) {\r\n        setDetail(code)\r\n    }\r\n\r\n    const [searchValue, setSearchValue] = useState('')\r\n    function search() {\r\n        setStockName(searchValue);\r\n        setPage(1);\r\n    }\r\n\r\n    return <div className='container'>\r\n\r\n        <div className={styles.container}>\r\n            <div className={styles.left}>\r\n\r\n\r\n\r\n                <div className='between'>\r\n                    <div className={styles.h1}>\r\n                        股票列表\r\n                </div>\r\n\r\n                    <div className={styles.extra}>\r\n                        <div className={styles.extraText}>\r\n                            第{page}页，共{total}条\r\n                        </div>\r\n                        <div onClick={prev}>\r\n                            <SvgIcon name='#icon-left' size='16' />\r\n                        </div>\r\n                        <div onClick={next}>\r\n                            <SvgIcon name='#icon-right' size='16' />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {list.map(item => {\r\n                    return (\r\n                        <div className={styles.info}>\r\n                            <div className={styles.header}>\r\n                                <div className={styles.tag}>{item.stock_type}</div>\r\n                                <div className={styles.title}>\r\n                                    [{item.name}]\r\n                                </div>\r\n                                <div className={\r\n                                    styles.code\r\n                                }>\r\n                                    {item.code}\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div className={styles.description}>\r\n                                {item.business_scope}\r\n                            </div>\r\n\r\n                            <div className=\"right\">\r\n                                <div className=\"button\" onClick={() => { seeDetail(item.code) }}>查看详情</div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                {detail === item.code && <KChart code={detail} />}\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })}\r\n\r\n            </div>\r\n            <div className={styles.right}>\r\n\r\n                <div className={styles.search}>\r\n                    <input className={styles.searchInput} type=\"text\" placeholder='请输入股票名称' value={searchValue} onChange={e => { setSearchValue(e.target.value) }} />\r\n                    <div className={styles.searchButton} onClick={search}>搜索</div>\r\n                </div>\r\n\r\n\r\n                <div className={styles.card}>\r\n                    {renderCompany()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n}\r\n\r\nexport default Stock;","\r\nfunction SvgIcon({ name = '', size = 40 }) {\r\n    return <svg aria-hidden='true' style={{ height: size, width: size, }}>\r\n        <use href={name} ></use>\r\n    </svg>\r\n}\r\n\r\nexport default SvgIcon;"],"sourceRoot":""}