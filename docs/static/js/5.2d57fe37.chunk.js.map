{"version":3,"sources":["pages/Stock/index.module.css","pages/Stock/KChart/index.module.css","pages/Stock/KChart/index.jsx","pages/Stock/index.jsx","components/SvgIcon/index.jsx"],"names":["module","exports","KChart","state","list","page","setChart","dom","document","getElementById","chart","init","setOption","xAxis","data","map","item","opening_date","yAxis","series","type","opening_price","closing_price","min_price","max_price","tooltip","show","setPage","setState","fetchList","this","code","props","fetch","then","res","json","Array","isArray","results","catch","err","console","error","id","style","height","width","className","styles","active","onClick","Component","Stock","useState","companyList","setCompanyList","setActive","useEffect","setList","total","setTotal","str","count","detail","setDetail","container","left","h1","extra","extraText","SvgIcon","name","size","info","header","tag","stock_type","title","description","business_scope","right","card","arr","index","icon","i","push","value","renderCompany","aria-hidden","href"],"mappings":"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","file":"static/js/5.2d57fe37.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Stock_container__1Ai9W\",\"left\":\"Stock_left__30fhW\",\"right\":\"Stock_right__1qXsh\",\"h1\":\"Stock_h1__n-itT\",\"extra\":\"Stock_extra__1g3-7\",\"extraText\":\"Stock_extraText__3JHNF\",\"card\":\"Stock_card__3uTKO\",\"item\":\"Stock_item__Jh7pQ\",\"active\":\"Stock_active__24E7k\",\"icon\":\"Stock_icon__PKI8U\",\"title\":\"Stock_title__2hMON\",\"value\":\"Stock_value__3-DDp\",\"info\":\"Stock_info__3ZPod\",\"header\":\"Stock_header__2OSn3\",\"code\":\"Stock_code__10zRd\",\"description\":\"Stock_description__2MsPd\",\"tag\":\"Stock_tag___VTVN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"KChart_item__1fL8r\",\"active\":\"KChart_active__k11lY\"};","import { Component } from 'react'\nimport { init } from 'echarts'\nimport styles from './index.module.css'\n\nclass KChart extends Component {\n\n    state = {\n        list: [],\n        page: 50\n    }\n\n    componentDidMount() {\n        this.fetchList();\n    }\n\n    fetchList() {\n\n        const { code } = this.props;\n        const { page } = this.state;\n\n        fetch(`http://cone387.top:8080/stock/market/?code=${code}&page=1&page_size=${page}`).then(res => res.json()).then(res => {\n            if (res && Array.isArray(res.results)) {\n\n                this.setState({\n                    list: res.results\n                }, () => {\n                    this.setChart();\n                })\n\n            }\n        }).catch(err => console.error)\n    }\n\n    setChart = () => {\n\n        const { list = [] } = this.state;\n\n        const dom = document.getElementById('k-chart');\n\n        this.chart = init(dom)\n\n        this.chart.setOption({\n            xAxis: {\n                data: list.map(item => item.opening_date)\n            },\n            yAxis: {},\n            series: [{\n                type: 'k',\n                data: list.map(item => [\n                    item.opening_price,\n                    item.closing_price,\n                    item.min_price,\n                    item.max_price\n                ]),\n            }],\n            tooltip: {\n                show: true,\n            }\n        })\n\n    }\n\n    setPage = (page) => {\n        this.setState({\n            page,\n        }, () => {\n            this.fetchList();\n        })\n    }\n\n    render() {\n\n        const { page } = this.state;\n\n        return (\n\n            <div>\n\n                <div id='k-chart' style={{ height: 400, width: '100%' }}>\n\n                </div>\n\n                <div className='center'>\n\n                    <div className={`${styles.item} ${page === 50 ? styles.active : ''}`} onClick={() => { this.setPage(50) }}>最近50条</div>\n                    <div className={`${styles.item} ${page === 100 ? styles.active : ''}`} onClick={() => { this.setPage(100) }}>最近100条</div>\n                    <div className={`${styles.item} ${page === 200 ? styles.active : ''}`} onClick={() => { this.setPage(200) }}>最近200条</div>\n\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default KChart","import { useEffect, useState } from \"react\";\nimport styles from './index.module.css'\nimport SvgIcon from '../../components/SvgIcon'\nimport KChart from './KChart'\n\n\nfunction Stock() {\n\n    const [companyList, setCompanyList] = useState({})\n\n    const [active, setActive] = useState(null)\n\n    useEffect(() => {\n        fetch(`http://cone387.top:8080/stock/status/`).then(res => res.json()).then(res => {\n            if (res) {\n                setCompanyList(res)\n            }\n        }).catch(err => console.error)\n    }, []);\n\n    const [page, setPage] = useState(1)\n    const [list, setList] = useState([])\n    const [total, setTotal] = useState(0)\n\n    useEffect(() => {\n\n        let str = ''\n        if (active) {\n            str = `&stock_type=${active}`\n        }\n\n        fetch(`http://cone387.top:8080/stock/info/?page=${page}&page_size=10${str}`).then(res => res.json()).then(res => {\n            if (typeof res.count === 'number') {\n                setTotal(res.count)\n            }\n            if (Array.isArray(res.results)) {\n                setList(res.results)\n            }\n        })\n    }, [page, active])\n\n    function prev() {\n        if (page === 1) {\n            return\n        }\n        setPage(page - 1)\n    }\n    function next() {\n        setPage(page + 1)\n    }\n\n    function renderCompany() {\n        let arr = []\n        let index = 0;\n        let icon = <SvgIcon name='#icon-2-dianzishenhe' size='24' />\n\n        for (let i in companyList) {\n\n            if (index === 1) {\n                icon = <SvgIcon name='#icon-12-changguirenwu' size='24' />\n            }\n            if (index === 2) {\n                icon = <SvgIcon name='#icon-14-zhishiku' size='24' />\n            }\n            if (index === 3) {\n                icon = <SvgIcon name='#icon-15-chehuixiaoxi' size='24' />\n            }\n            if (index === 4) {\n                icon = <SvgIcon name='#icon-19-qiehuancaozuo-icon' size='24' />\n            }\n\n            index++;\n\n            arr.push(\n                <div className={`${styles.item} ${active === i ? styles.active : ''}`} onClick={() => { setActive(i); setPage(1) }}>\n\n                    <div className={styles.icon}>{icon}</div>\n                    <div className={styles.title}>{i}</div>\n                    <div className={styles.value}>\n                        {companyList[i]}\n                    </div>\n                </div>\n            )\n        }\n        return arr;\n    }\n\n    const [detail, setDetail] = useState(null)\n    function seeDetail(code) {\n        setDetail(code)\n    }\n\n    return <div className='container'>\n\n        <div className={styles.container}>\n            <div className={styles.left}>\n\n\n\n                <div className='between'>\n                    <div className={styles.h1}>\n                        股票列表\n                </div>\n\n                    <div className={styles.extra}>\n                        <div className={styles.extraText}>\n                            第{page}页，共{total}条\n                        </div>\n                        <div onClick={prev}>\n                            <SvgIcon name='#icon-left' size='16' />\n                        </div>\n                        <div onClick={next}>\n                            <SvgIcon name='#icon-right' size='16' />\n                        </div>\n                    </div>\n                </div>\n                {list.map(item => {\n                    return (\n                        <div className={styles.info}>\n                            <div className={styles.header}>\n                                <div className={styles.tag}>{item.stock_type}</div>\n                                <div className={styles.title}>\n                                    [{item.name}]\n                                </div>\n                                <div className={\n                                    styles.code\n                                }>\n                                    {item.code}\n\n                                </div>\n\n                            </div>\n\n                            <div className={styles.description}>\n                                {item.business_scope}\n                            </div>\n\n                            <div className=\"right\">\n                                <div className=\"button\" onClick={() => { seeDetail(item.code) }}>查看详情</div>\n                            </div>\n\n                            <div>\n                                {detail === item.code && <KChart code={detail} />}\n                            </div>\n                        </div>\n                    )\n                })}\n\n            </div>\n            <div className={styles.right}>\n                <div className={styles.card}>\n                    {renderCompany()}\n                </div>\n            </div>\n        </div>\n\n    </div>\n}\n\nexport default Stock;","\nfunction SvgIcon({ name = '', size = 40 }) {\n    return <svg aria-hidden='true' style={{ height: size, width: size, }}>\n        <use href={name} ></use>\n    </svg>\n}\n\nexport default SvgIcon;"],"sourceRoot":""}