{"version":3,"sources":["pages/Todo/index.module.css","pages/Todo/index.jsx"],"names":["module","exports","Todo","useState","todo","setTodo","loading","setLoading","list","setList","useEffect","store","app","callFunction","name","then","res","console","log","result","Array","isArray","data","catch","err","error","className","styles","title","panel","type","placeholder","input","value","onChange","e","target","button","onClick","style","padding","map","item","index","li","iconfont","_id","deleted","onDelete"],"mappings":"wGACAA,EAAOC,QAAU,CAAC,MAAQ,oBAAoB,MAAQ,oBAAoB,MAAQ,oBAAoB,OAAS,qBAAqB,GAAK,iBAAiB,MAAQ,oBAAoB,SAAW,yB,4FC0HlLC,UAvHf,WAAiB,IAAD,EAEYC,mBAAS,IAFrB,mBAELC,EAFK,KAECC,EAFD,OAGkBF,oBAAS,GAH3B,mBAGLG,EAHK,KAGIC,EAHJ,OAIYJ,mBAAS,IAJrB,mBAILK,EAJK,KAICC,EAJD,KAuFZ,OAjFAC,qBAAU,WAENC,IAAMC,IAAIC,aAAa,CACnBC,KAAM,SACPC,MAAK,SAAAC,GACJC,QAAQC,IAAI,MAAOF,GAEfA,EAAIG,QAAUC,MAAMC,QAAQL,EAAIG,OAAOG,OACvCb,EAAQO,EAAIG,OAAOG,SAGxBC,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,WAEzB,IAoEI,sBAAKC,UAAU,YAAf,UAEH,qBAAKA,UAAWC,IAAOC,MAAvB,uBAIA,sBAAKF,UAAWC,IAAOE,MAAvB,UACI,uBAAOC,KAAK,OAAOC,YAAY,6CAAUL,UAAWC,IAAOK,MAAOC,MAAO7B,EAAM8B,SAAU,SAAAC,GAAO9B,EAAQ8B,EAAEC,OAAOH,UACjH,qBAAKP,UAAWC,IAAOU,OAAQC,QA1EvC,WAEI/B,GAAW,GACXI,IAAMC,IAAIC,aAAa,CACnBC,KAAM,UACNQ,KAAM,CACFR,KAAMV,KAEXW,MAAK,SAAAC,GAEJC,QAAQC,IAAI,OAAQF,GAGpBL,IAAMC,IAAIC,aAAa,CACnBC,KAAM,SACPC,MAAK,SAAAC,GAEJT,GAAW,GAEXU,QAAQC,IAAI,MAAOF,GAEfA,EAAIG,QAAUC,MAAMC,QAAQL,EAAIG,OAAOG,QACvCb,EAAQO,EAAIG,OAAOG,MACnBjB,EAAQ,QAGbkB,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,YAGzBF,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,UA6CpB,6BAEHnB,GACG,qBAAKiC,MAAO,CAAEC,QAAS,GAAvB,mCAGJ,6BACKhC,EAAKiC,KAAI,SAACC,EAAMC,GAAP,OACN,qBAAIjB,UAAWC,IAAOiB,GAAtB,UACI,uBAAMlB,UAAWC,IAAOgB,MAAxB,UACKA,EAAQ,EADb,OAGA,sBAAMjB,UAAWC,IAAOb,KAAxB,SACK4B,EAAK5B,OAEV,sBAAMY,UAAS,+BAA0BC,IAAOkB,UAAYP,QAAS,YAzDrF,SAAkBI,GAEdnC,GAAW,GAEXI,IAAMC,IAAIC,aAAa,CACnBC,KAAM,aACNQ,KAAM,CACFwB,IAAKJ,EAAKI,OAEf/B,MAAK,SAAAC,GACJC,QAAQC,IAAI,MAAOF,GACfA,GAAOA,EAAIG,QAAUH,EAAIG,OAAO4B,SAGhCpC,IAAMC,IAAIC,aAAa,CACnBC,KAAM,SACPC,MAAK,SAAAC,GAEJT,GAAW,GAEXU,QAAQC,IAAI,MAAOF,GAEfA,EAAIG,QAAUC,MAAMC,QAAQL,EAAIG,OAAOG,OACvCb,EAAQO,EAAIG,OAAOG,SAGxBC,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,YAI7BF,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,SA2BiEuB,CAASN,QAP3DC","file":"static/js/13.39aa67cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Todo_title__3NK-W\",\"panel\":\"Todo_panel__3DGTC\",\"input\":\"Todo_input__1j7VK\",\"button\":\"Todo_button__hKTVd\",\"li\":\"Todo_li__GrZ-K\",\"index\":\"Todo_index__3lOui\",\"iconfont\":\"Todo_iconfont__3fiO7\"};","import { useEffect, useState } from \"react\";\nimport store from '../../store'\nimport styles from './index.module.css'\n\nfunction Todo() {\n\n    const [todo, setTodo] = useState('')\n    const [loading, setLoading] = useState(false)\n    const [list, setList] = useState([])\n\n    useEffect(() => {\n\n        store.app.callFunction({\n            name: 'todo'\n        }).then(res => {\n            console.log('res', res)\n\n            if (res.result && Array.isArray(res.result.data)) {\n                setList(res.result.data)\n            }\n\n        }).catch(err => console.error)\n\n    }, []);\n\n    function onAdd() {\n\n        setLoading(true)\n        store.app.callFunction({\n            name: 'addTodo',\n            data: {\n                name: todo,\n            }\n        }).then(res => {\n\n            console.log('res ', res)\n\n\n            store.app.callFunction({\n                name: 'todo'\n            }).then(res => {\n\n                setLoading(false)\n\n                console.log('res', res)\n\n                if (res.result && Array.isArray(res.result.data)) {\n                    setList(res.result.data)\n                    setTodo('')\n                }\n\n            }).catch(err => console.error)\n\n\n        }).catch(err => console.error)\n    }\n\n    function onDelete(item) {\n\n        setLoading(true)\n\n        store.app.callFunction({\n            name: 'deleteTodo',\n            data: {\n                _id: item._id\n            }\n        }).then(res => {\n            console.log('res', res)\n            if (res && res.result && res.result.deleted) {\n\n\n                store.app.callFunction({\n                    name: 'todo'\n                }).then(res => {\n\n                    setLoading(false)\n\n                    console.log('res', res)\n\n                    if (res.result && Array.isArray(res.result.data)) {\n                        setList(res.result.data)\n                    }\n\n                }).catch(err => console.error)\n\n\n            }\n        }).catch(err => console.error)\n\n    }\n\n    return <div className=\"container\">\n\n        <div className={styles.title}>\n            Todo List\n        </div>\n\n        <div className={styles.panel}>\n            <input type=\"text\" placeholder='请输入待办事项' className={styles.input} value={todo} onChange={e => { setTodo(e.target.value) }} />\n            <div className={styles.button} onClick={onAdd}>添加</div>\n        </div>\n        {loading && (\n            <div style={{ padding: 8 }}>处理中...</div>\n        )}\n\n        <ul>\n            {list.map((item, index) => (\n                <li className={styles.li} key={index}>\n                    <span className={styles.index}>\n                        {index + 1}.\n                    </span>\n                    <span className={styles.name}>\n                        {item.name}\n                    </span>\n                    <span className={`iconfont icon-delete ${styles.iconfont}`} onClick={() => { onDelete(item) }}>\n\n                    </span>\n                </li>\n            ))}\n        </ul>\n    </div>\n}\n\nexport default Todo;"],"sourceRoot":""}