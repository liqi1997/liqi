{"version":3,"sources":["pages/Todo/index.module.css","pages/Todo/index.jsx"],"names":["module","exports","Todo","useState","todo","setTodo","loading","setLoading","list","setList","useEffect","store","app","callFunction","name","then","res","console","log","result","Array","isArray","data","catch","err","error","className","styles","title","panel","type","placeholder","input","value","onChange","e","target","button","onClick","style","padding","map","item","index","li","iconfont","_id","deleted","onDelete"],"mappings":"wGACAA,EAAOC,QAAU,CAAC,MAAQ,oBAAoB,MAAQ,oBAAoB,MAAQ,oBAAoB,OAAS,qBAAqB,GAAK,iBAAiB,MAAQ,oBAAoB,SAAW,yB,4FC0HlLC,UAvHf,WAAiB,IAAD,EAEYC,mBAAS,IAFrB,mBAELC,EAFK,KAECC,EAFD,OAGkBF,oBAAS,GAH3B,mBAGLG,EAHK,KAGIC,EAHJ,OAIYJ,mBAAS,IAJrB,mBAILK,EAJK,KAICC,EAJD,KAuFZ,OAjFAC,qBAAU,WAENC,IAAMC,IAAIC,aAAa,CACnBC,KAAM,SACPC,MAAK,SAAAC,GACJC,QAAQC,IAAI,MAAOF,GAEfA,EAAIG,QAAUC,MAAMC,QAAQL,EAAIG,OAAOG,OACvCb,EAAQO,EAAIG,OAAOG,SAGxBC,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,WAEzB,IAoEI,sBAAKC,UAAU,YAAf,UAEH,qBAAKA,UAAWC,IAAOC,MAAvB,uBAIA,sBAAKF,UAAWC,IAAOE,MAAvB,UACI,uBAAOC,KAAK,OAAOC,YAAY,6CAAUL,UAAWC,IAAOK,MAAOC,MAAO7B,EAAM8B,SAAU,SAAAC,GAAO9B,EAAQ8B,EAAEC,OAAOH,UACjH,qBAAKP,UAAWC,IAAOU,OAAQC,QA1EvC,WAEI/B,GAAW,GACXI,IAAMC,IAAIC,aAAa,CACnBC,KAAM,UACNQ,KAAM,CACFR,KAAMV,KAEXW,MAAK,SAAAC,GAEJC,QAAQC,IAAI,OAAQF,GAGpBL,IAAMC,IAAIC,aAAa,CACnBC,KAAM,SACPC,MAAK,SAAAC,GAEJT,GAAW,GAEXU,QAAQC,IAAI,MAAOF,GAEfA,EAAIG,QAAUC,MAAMC,QAAQL,EAAIG,OAAOG,QACvCb,EAAQO,EAAIG,OAAOG,MACnBjB,EAAQ,QAGbkB,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,YAGzBF,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,UA6CpB,6BAEHnB,GACG,qBAAKiC,MAAO,CAAEC,QAAS,GAAvB,mCAGJ,6BACKhC,EAAKiC,KAAI,SAACC,EAAMC,GAAP,OACN,qBAAIjB,UAAWC,IAAOiB,GAAtB,UACI,uBAAMlB,UAAWC,IAAOgB,MAAxB,UACKA,EAAQ,EADb,OAGA,sBAAMjB,UAAWC,IAAOb,KAAxB,SACK4B,EAAK5B,OAEV,sBAAMY,UAAS,+BAA0BC,IAAOkB,UAAYP,QAAS,YAzDrF,SAAkBI,GAEdnC,GAAW,GAEXI,IAAMC,IAAIC,aAAa,CACnBC,KAAM,aACNQ,KAAM,CACFwB,IAAKJ,EAAKI,OAEf/B,MAAK,SAAAC,GACJC,QAAQC,IAAI,MAAOF,GACfA,GAAOA,EAAIG,QAAUH,EAAIG,OAAO4B,SAGhCpC,IAAMC,IAAIC,aAAa,CACnBC,KAAM,SACPC,MAAK,SAAAC,GAEJT,GAAW,GAEXU,QAAQC,IAAI,MAAOF,GAEfA,EAAIG,QAAUC,MAAMC,QAAQL,EAAIG,OAAOG,OACvCb,EAAQO,EAAIG,OAAOG,SAGxBC,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,YAI7BF,OAAM,SAAAC,GAAG,OAAIP,QAAQQ,SA2BiEuB,CAASN,QAP3DC","file":"static/js/13.500c5207.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Todo_title__1yQUB\",\"panel\":\"Todo_panel__2cok3\",\"input\":\"Todo_input__1-H3A\",\"button\":\"Todo_button__3T1Ow\",\"li\":\"Todo_li__1lA4y\",\"index\":\"Todo_index__3FE5N\",\"iconfont\":\"Todo_iconfont__3c7Bq\"};","import { useEffect, useState } from \"react\";\r\nimport store from '../../store'\r\nimport styles from './index.module.css'\r\n\r\nfunction Todo() {\r\n\r\n    const [todo, setTodo] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const [list, setList] = useState([])\r\n\r\n    useEffect(() => {\r\n\r\n        store.app.callFunction({\r\n            name: 'todo'\r\n        }).then(res => {\r\n            console.log('res', res)\r\n\r\n            if (res.result && Array.isArray(res.result.data)) {\r\n                setList(res.result.data)\r\n            }\r\n\r\n        }).catch(err => console.error)\r\n\r\n    }, []);\r\n\r\n    function onAdd() {\r\n\r\n        setLoading(true)\r\n        store.app.callFunction({\r\n            name: 'addTodo',\r\n            data: {\r\n                name: todo,\r\n            }\r\n        }).then(res => {\r\n\r\n            console.log('res ', res)\r\n\r\n\r\n            store.app.callFunction({\r\n                name: 'todo'\r\n            }).then(res => {\r\n\r\n                setLoading(false)\r\n\r\n                console.log('res', res)\r\n\r\n                if (res.result && Array.isArray(res.result.data)) {\r\n                    setList(res.result.data)\r\n                    setTodo('')\r\n                }\r\n\r\n            }).catch(err => console.error)\r\n\r\n\r\n        }).catch(err => console.error)\r\n    }\r\n\r\n    function onDelete(item) {\r\n\r\n        setLoading(true)\r\n\r\n        store.app.callFunction({\r\n            name: 'deleteTodo',\r\n            data: {\r\n                _id: item._id\r\n            }\r\n        }).then(res => {\r\n            console.log('res', res)\r\n            if (res && res.result && res.result.deleted) {\r\n\r\n\r\n                store.app.callFunction({\r\n                    name: 'todo'\r\n                }).then(res => {\r\n\r\n                    setLoading(false)\r\n\r\n                    console.log('res', res)\r\n\r\n                    if (res.result && Array.isArray(res.result.data)) {\r\n                        setList(res.result.data)\r\n                    }\r\n\r\n                }).catch(err => console.error)\r\n\r\n\r\n            }\r\n        }).catch(err => console.error)\r\n\r\n    }\r\n\r\n    return <div className=\"container\">\r\n\r\n        <div className={styles.title}>\r\n            Todo List\r\n        </div>\r\n\r\n        <div className={styles.panel}>\r\n            <input type=\"text\" placeholder='请输入待办事项' className={styles.input} value={todo} onChange={e => { setTodo(e.target.value) }} />\r\n            <div className={styles.button} onClick={onAdd}>添加</div>\r\n        </div>\r\n        {loading && (\r\n            <div style={{ padding: 8 }}>处理中...</div>\r\n        )}\r\n\r\n        <ul>\r\n            {list.map((item, index) => (\r\n                <li className={styles.li} key={index}>\r\n                    <span className={styles.index}>\r\n                        {index + 1}.\r\n                    </span>\r\n                    <span className={styles.name}>\r\n                        {item.name}\r\n                    </span>\r\n                    <span className={`iconfont icon-delete ${styles.iconfont}`} onClick={() => { onDelete(item) }}>\r\n\r\n                    </span>\r\n                </li>\r\n            ))}\r\n        </ul>\r\n    </div>\r\n}\r\n\r\nexport default Todo;"],"sourceRoot":""}