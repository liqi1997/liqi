{"version":3,"sources":["pages/News/index.module.css","api/ask.js","pages/News/index.jsx","api/news.js"],"names":["module","exports","ask","axios","create","baseURL","interceptors","request","use","config","error","Promise","reject","response","data","News","useState","categoryList","setCategoryList","activeId","setActiveId","name","setName","url","setUrl","list","setList","updateTime","setUpdateTime","useEffect","then","res","console","log","Array","isArray","arr","forEach","item","subs","length","id","update_time","className","styles","map","category","active","onClick","container","href","target","rel","index","first","title","tag","time"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,UAAY,wBAAwB,KAAO,mBAAmB,SAAW,uBAAuB,OAAS,qBAAqB,KAAO,mBAAmB,KAAO,mBAAmB,MAAQ,oBAAoB,MAAQ,oBAAoB,IAAM,kBAAkB,KAAO,qB,2ECCrRC,E,OAAMC,EAAMC,OAAO,CACrBC,QAAS,sCAIbH,EAAII,aAAaC,QAAQC,KAAI,SAAUC,GAEnC,OAAOA,KACR,SAAUC,GAET,OAAOC,QAAQC,OAAOF,MAI1BR,EAAII,aAAaO,SAASL,KAAI,SAAUK,GAEpC,OAAOA,EAASC,QACjB,SAAUJ,GAET,OAAOC,QAAQC,OAAOF,MAGXR,Q,6BC0EAa,UA7Ff,WAAiB,IAAD,EAE4BC,mBAAS,IAFrC,mBAELC,EAFK,KAESC,EAFT,OAGoBF,oBAAU,GAH9B,mBAGLG,EAHK,KAGKC,EAHL,OAKYJ,mBAAS,IALrB,mBAKLK,EALK,KAKCC,EALD,OAMUN,mBAAS,IANnB,mBAMLO,EANK,KAMAC,EANA,OAOYR,mBAAS,IAPrB,mBAOLS,EAPK,KAOCC,EAPD,OAQwBV,mBAAS,IARjC,mBAQLW,EARK,KAQOC,EARP,KA+CZ,OAnCAC,qBAAU,WCdH3B,EAAI,CACPqB,IAAK,cDcOO,MAAK,SAAAC,GAEb,GADAC,QAAQC,IAAI,MAAOF,GACfG,MAAMC,QAAQJ,GAAM,CACpB,IAAIK,EAAM,GACVL,EAAIM,SAAQ,SAAAC,GACJJ,MAAMC,QAAQG,EAAKC,QACnBH,EAAG,sBAAOA,GAAP,YAAeE,EAAKC,WAI3BH,EAAII,OAAS,IACbtB,EAAgBkB,GAChBhB,EAAYgB,EAAI,GAAGK,WAMhC,IAEHZ,qBAAU,WC9BP,IAAmBY,ED+BdtB,GAAY,IC/BEsB,EDgCJtB,EC/BXjB,EAAI,CACPqB,IAAI,QAAD,OAAUkB,EAAV,YD8BqBX,MAAK,SAAAC,GACjBG,MAAMC,QAAQJ,EAAIjB,QAClBQ,EAAQS,EAAIV,MACZG,EAAOO,EAAIR,KACXG,EAAQK,EAAIjB,MACZc,EAAcG,EAAIW,mBAK/B,CAACvB,IAEG,sBAAKwB,UAAU,GAAf,UAEH,qBAAKA,UAAU,YAAf,SACI,oBAAIA,UAAWC,IAAOnB,KAAtB,SACKR,EAAa4B,KAAI,SAAAP,GAAI,OAAI,oBAAIK,UAAS,UAAKC,IAAOE,SAAZ,YAAwB3B,IAAamB,EAAKG,GAAKG,IAAOG,OAAS,IAAMC,QAAS,WAAQ5B,EAAYkB,EAAKG,KAApH,SACrBH,EAAKjB,cAMlB,qBAAKsB,UAAWC,IAAOK,UAAvB,SACI,sBAAKN,UAAU,YAAf,UACI,qBAAKA,UAAWC,IAAOvB,KAAvB,SACI,mBAAG6B,KAAM3B,EAAK4B,OAAO,SAASC,IAAI,aAAlC,SACK/B,MAGT,6BACKI,EAAKoB,KAAI,SAACP,EAAMe,GAAP,OAAiB,qBAAIV,UAAWC,IAAON,KAAtB,UAGvB,uBAAMK,UAAS,UAAKC,IAAOS,MAAZ,YAAqBA,EAAQ,EAAIT,IAAOU,MAAQ,IAA/D,UACKD,EAAQ,EADb,OAIA,mBAAGV,UAAWC,IAAOW,MAAOL,KAAMZ,EAAKf,IAAK4B,OAAO,SAASC,IAAI,aAAhE,SACKd,EAAKiB,QAGV,sBAAMZ,UAAWC,IAAOY,IAAxB,SAA8BlB,EAAKkB,cAI3C,sBAAKb,UAAWC,IAAOa,KAAvB,uCAAqC9B","file":"static/js/8.f595a232.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"News_container__1CmzL\",\"list\":\"News_list__rlV_K\",\"category\":\"News_category__221fQ\",\"active\":\"News_active__lOZu9\",\"name\":\"News_name__1lXox\",\"item\":\"News_item__3ZyE1\",\"index\":\"News_index__1er67\",\"first\":\"News_first__2I1vG\",\"tag\":\"News_tag__3qRSu\",\"time\":\"News_time__2xwQC\"};","import axios from 'axios'\r\n\r\nconst ask = axios.create({\r\n    baseURL: 'http://cone.love:8000/api/rest/v1'\r\n})\r\n\r\n// 添加请求拦截器\r\nask.interceptors.request.use(function (config) {\r\n    // 在发送请求之前做些什么\r\n    return config;\r\n}, function (error) {\r\n    // 对请求错误做些什么\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 添加响应拦截器\r\nask.interceptors.response.use(function (response) {\r\n    // 对响应数据做点什么\r\n    return response.data;\r\n}, function (error) {\r\n    // 对响应错误做点什么\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport default ask;","\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchList, fetchNews } from '../../api/news'\r\nimport styles from './index.module.css'\r\n\r\nfunction News() {\r\n\r\n    const [categoryList, setCategoryList] = useState([])\r\n    const [activeId, setActiveId] = useState(-1)\r\n\r\n    const [name, setName] = useState('')\r\n    const [url, setUrl] = useState('')\r\n    const [list, setList] = useState([])\r\n    const [updateTime, setUpdateTime] = useState('')\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        fetchList().then(res => {\r\n            console.log('res', res)\r\n            if (Array.isArray(res)) {\r\n                let arr = []\r\n                res.forEach(item => {\r\n                    if (Array.isArray(item.subs)) {\r\n                        arr = [...arr, ...item.subs]\r\n                    }\r\n                })\r\n\r\n                if (arr.length > 0) {\r\n                    setCategoryList(arr)\r\n                    setActiveId(arr[0].id)\r\n                }\r\n\r\n\r\n            }\r\n        })\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (activeId > -1) {\r\n            fetchNews(activeId).then(res => {\r\n                if (Array.isArray(res.data)) {\r\n                    setName(res.name)\r\n                    setUrl(res.url)\r\n                    setList(res.data)\r\n                    setUpdateTime(res.update_time)\r\n                }\r\n            })\r\n        }\r\n\r\n    }, [activeId]);\r\n\r\n    return <div className=''>\r\n\r\n        <div className='container'>\r\n            <ul className={styles.list}>\r\n                {categoryList.map(item => <li className={`${styles.category} ${activeId === item.id ? styles.active : ''}`} onClick={() => { setActiveId(item.id) }}>\r\n                    {item.name}\r\n                </li>)}\r\n            </ul>\r\n\r\n        </div>\r\n\r\n        <div className={styles.container}>\r\n            <div className=\"container\">\r\n                <div className={styles.name}>\r\n                    <a href={url} target=\"_blank\" rel='noreferrer'>\r\n                        {name}\r\n                    </a>\r\n                </div>\r\n                <ul>\r\n                    {list.map((item, index) => <li className={styles.item}>\r\n\r\n\r\n                        <span className={`${styles.index} ${index < 3 ? styles.first : ''}`}>\r\n                            {index + 1}.\r\n                        </span>\r\n\r\n                        <a className={styles.title} href={item.url} target=\"_blank\" rel='noreferrer'>\r\n                            {item.title}\r\n                        </a>\r\n\r\n                        <span className={styles.tag}>{item.tag}</span>\r\n                    </li>)}\r\n                </ul>\r\n\r\n                <div className={styles.time} >更新时间: {updateTime}</div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n    </div>\r\n}\r\n\r\nexport default News;","import ask from './ask'\r\n\r\nexport function fetchList() {\r\n    return ask({\r\n        url: '/sub/cate',\r\n    })\r\n}\r\n\r\nexport function fetchNews(id) {\r\n    return ask({\r\n        url: `/sub/${id}/data`\r\n    })\r\n}"],"sourceRoot":""}